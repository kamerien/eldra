# Standard フォーマット最適化計画

## 1. 現状の容量内訳（約 250MB）

### テクスチャデータ（180MB）

```
- カード画像: 1,500枚 × 150KB = 約180MB
- 画像形式: DXT5圧縮
- 解像度: 336x468px
- アトラス: 15個（4096x4096px）
```

### その他データ（70MB）

```
- カードデータ（JSON）: 1.5MB
- ワールドジオメトリ: 50MB
- UI要素: 13MB
- スクリプト: 5MB
- その他: 0.5MB
```

## 2. 最適化目標（目標: 200MB 以下）

### A. テクスチャ最適化（▲50MB）

1. カード画像圧縮

```
現状: 336x468px, DXT5
↓
最適化: 280x390px, ASTC
削減量: 約30%（54MB削減）
```

2. アトラス最適化

```
- デッキごとのサブアトラス作成
- よく使用されるカードの優先配置
- ミップマップの選択的無効化
削減量: 約20%（残り126MBから25MB削減）
```

3. UI 要素の最適化

```
- スプライトアトラスの活用
- 共通テクスチャの統合
- 動的生成の活用
削減量: 約8MB
```

### B. アセット最適化（▲10MB）

1. ワールドジオメトリ

```
- LOD（Level of Detail）の実装
- ライト/シャドウの最適化
- マテリアルの共有化
削減量: 約15MB → 40MB
```

2. その他最適化

```
- アセットバンドルの活用
- キャッシュシステムの実装
- 未使用アセットの削除
削減量: 約5MB
```

## 3. 実装計画

### フェーズ 1: テクスチャ最適化

```
1. カード画像の再処理
   - サイズ変更: 280x390px
   - ASTC圧縮への変換
   - アトラス再生成

2. アトラス最適化
   - デッキベースの分割
   - 使用頻度分析
   - 動的ローディング実装

所要時間: 約2週間
削減量: 約54MB
```

### フェーズ 2: UI 最適化

```
1. UI要素の統合
   - スプライトアトラス作成
   - 共通要素の特定
   - 動的生成システム実装

2. レイアウト最適化
   - UI階層の見直し
   - レンダリング最適化
   - メモリ使用量削減

所要時間: 約1週間
削減量: 約8MB
```

### フェーズ 3: ワールド最適化

```
1. ジオメトリ最適化
   - LODシステム実装
   - ライティング見直し
   - コライダー最適化

2. システム最適化
   - アセットバンドル作成
   - キャッシュシステム実装
   - パフォーマンス検証

所要時間: 約1週間
削減量: 約15MB
```

## 4. 最終目標サイズ

```
最適化後の内訳:
- カード画像: 約101MB
- ワールドジオメトリ: 40MB
- UI要素: 5MB
- その他: 約7MB

合計: 約153MB
VRChat推奨サイズ（200MB）以内に収まる
```

## 5. パフォーマンス指標

### 目標値

```
1. ロード時間
   - 初回: 15秒以内
   - 2回目以降: 8秒以内

2. フレームレート
   - VR: 72fps以上
   - デスクトップ: 60fps以上

3. メモリ使用量
   - ピーク時: 1GB以内
   - 通常時: 512MB以内
```

### モニタリング項目

```
1. パフォーマンスカウンター
   - Draw calls: 100以下
   - バッチ数: 50以下
   - メモリ使用量
   - GPU使用率

2. ネットワーク
   - 同期遅延: 100ms以下
   - パケットロス: 1%以下
```

## 6. メンテナンス計画

### 定期更新

```
1. カードデータ更新（3ヶ月ごと）
   - 新セット追加
   - 禁止制限リスト更新
   - テクスチャアトラス再構築

2. パフォーマンス最適化（月1回）
   - 使用統計分析
   - アトラス再構成
   - キャッシュクリーンアップ
```

### 緊急対応

```
1. クリティカルな問題
   - メモリリーク
   - クラッシュ
   - 同期エラー

2. バックアップ計画
   - アセットのバージョン管理
   - ロールバック手順
   - 緊急パッチ手順
```
